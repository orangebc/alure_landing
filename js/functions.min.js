jQuery.validator.addMethod("expression", function(value, element, param) {
    return value.match(new RegExp("^" + param + "$"));
});
$(function () {
	$("#telefono").keypress(function (e) {
		if (e.which != 8 && e.which != 0 && (e.which < 48 || e.which > 57) && e.which != 13) {
			return false;
		}
	});

	$("#mainForm").validate({
		rules: {
			nombre: {
				required: true,
				expression: "[a-zA-Z Ññáéíóú]+"
			},
			apellidos: {
				required: true,
				expression: "[a-zA-Z Ññáéíóú]+"
			},
			email: {
			   required: true,
			   email: true
		    },
		    telefono: {
		    	required: true,
		    	digits: true
		    }
        },
		messages: {
			nombre: {
				required: "Por favor escribe tu nombre",
				expression: "Sólo permite escribir letras"
			},
			apellidos: {
				required: "Por favor escribe tu nombre",
				expression: "Sólo permite escribir letras"
			},
			email: {
			   required: "Por favor escribe tu correo electrónico",
			   email: "Sólo permite ingresar correos electrónicos validos"
		    },
			telefono: {
				required: "Por favor escribe tu número de celular",
				digits: "Solo permite ingresar números",
				minlength: "El telefono debe contener 10 dígitos (clave lada + número telefónico)"
			}

		},
		debug: true,
		onfocusout:false,
		onkeyup:false,
		onclick:false,
		submitHandler: function(form) {
				checkForm(form);
		},
		errorPlacement: function (error, element) {
		},
		showErrors: function(errorMap, errorList){
			this.defaultShowErrors();
			if(errorList.length) {
				alert(errorList[0].message);
			}
		}
	});
});

/*function checkForm(form){
	var formID ="#mainForm";
	var formURL = "php/send.php";
	var formData = $(formID).serialize();
	$.post(formURL, formData, function(data){
		if(data.message=="success"){
			alert('Gracias, en breve nos comunicaremos con usted.');
			$("#mainForm").fadeOut(2000);
		}
		return false;
	},"json");
}*/